<!DOCTYPE html>
<html>

<head>
    <title>waves</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
    </style>
</head>

<body>
    <script type="module">
        import {
            select,
            range
        } from 'https://cdn.skypack.dev/d3@7.0.0';

        const width = window.innerWidth;
        const height = window.innerHeight;

        const svg = select('body')
            .append('svg')
            .attr('width', width)
            .attr('height', height);
        
        function makeData(n, t) {
            const data = range(n).map((d) => ({
                x: d * 60 + 50,
                y: 250 + Math.sin(d * 0.5 + t) * 220,
                r: 20 + Math.sin(d * 0.5 + t * 2) * 10,
            }));
            return data;
        }

        function vizData(data) {
            const circles = svg
                .selectAll('circle')
                .data(data)
                .join('circle') // .join is a shorthand for the entire general update pattern (initialize, then update)
                .attr('r', (d) => d.r)
                .attr('cx', (d) => d.x)
                .attr('cy', (d) => d.y);
        }

        let t = 0;
        setInterval(() => {
            const n = 25
            const data = makeData(n, t);
            vizData(data);
            t = t + 0.01;
        }, 1000 / 60);
           
    </script>

</body>

</html>