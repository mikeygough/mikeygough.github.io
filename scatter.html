<!DOCTYPE html>
<html>

<head>
    <title>scatter</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
    </style>
    <script src="https://unpkg.com/d3@6.7.0/dist/d3.min.js"></script>
</head>

<body>
    <script>
        const { csv, select, scaleLinear, extent } = d3;

        const csvUrl = [
                        'https://gist.githubusercontent.com/',
                        'curran/', // User
                        'a08a1080b88344b0c8a7/', // Id of the Gist
                        'raw/0e7a9b0a5d22642a06d3d5b9bcbad9890c8ee534/', // commit
                        'iris.csv', // File name
                        ].join('');
        
        // set x value, y value
        const xValue = (d) => d.petal_length;
        const yValue = (d) => d.sepal_length;

        // parse strings into numbers
        const parseRow = (d) => {
            d.sepal_length = +d.sepal_length;
            d.sepal_width = +d.sepal_width;
            d.petal_length = +d.petal_length;
            d.petal_width = +d.petal_width;
            return d;
        };

        // set svg attributes for size
        const width = window.innerWidth;
        const height = window.innerHeight;

        // append svg to dom
        const svg = select('body')
            .append('svg')
            .attr('width', width)
            .attr('height', height)

        const main = async () => {
            const data = await csv(csvUrl, parseRow); // fetch data

            // scaleLinear has a domain and a range. domain is the dataspace, range is the screen space.
            const x = scaleLinear()
                .domain(extent(data, xValue)) // ANOTHER WAY -> .domain([d3.min(data, xValue), d3.max(data, xValue)]); // set the domain (minimum, maximum)
                .range([0, width]);
            
            const y = scaleLinear()
                .domain(extent(data, yValue))
                .range([height, 0]);

            const marks = data.map(d => ({
                x: x(xValue(d)),
                y: y(yValue(d))
            }));

            console.log(marks);

            svg
                .selectAll('circle')
                .data(marks)
                .join('circle')
                .attr('cx', (d) => d.x)
                .attr('cy', (d) => d.y)
                .attr('r', 5);
            
            // console.log(x.domain());
            // console.log(x.range());
            // console.log(y.domain());
            // console.log(y.range());

            
            
            
        };

        main();

    </script>

</body>

</html>